<!-- @format -->

# SDUT Dormitory Remaining Battery Reminder Assistant

## 山东理工大学宿舍剩余电费查询助手

理工大的宿舍剩余电量提醒服务似有似无，好几次突然断电，于是简单开发了一下基础的查询

由于学校的电费查询是完全公开的，可以无限制的访问任意宿舍的任意电量数据，所以代码里的请求数据也就保留了，用这个访问到的是本人宿舍的电费

如果想改成自己宿舍的，爬一下宿舍的请求信息然后替换即可 ~~(都开始用 github 了是时候学会自行找方法了 qwq)~~

### 食用方法：

- python 文件夹中为直接请求，是一个最基础的功能，会直接返回剩余电量
- server 文件夹中为基于 nodejs 的服务端，用于请求与返回数据
- nb-plugin/SDUT-DRBRA 文件夹为 nonebot 的插件，可以**手动查询**或**定时查询并在低电量时主动提醒**，需要部署到基于 nonebot 的 Qbot 上
- nb-plugin/SDUT-DRBRA-CLI 文件夹为 nonebot 的插件，与完整版类似，但是前后端分离
- web 文件夹为综合信息查询 WebSite，但还没写好 qwq

### 计划：

（由于功能到此就很够用了，所以随缘开发）

1. ~~配置与重载功能~~
1. Web 显示
1. ~~邮件推送~~

### 其他

联系方式(QQ): `670526605`

## 更新记录

### 2023.11.5

> v1.2.1

**修复**

- 修复了今日电量初始化错误
- 修复了自动时间与设置时间相反的 bug

### 2023.11.1

> v1.2.0

**新增**

- 基于 nodejs 的服务端与配套 nb 前端插件（完整版的 nb 插件不再更新）

**删除**

- 删除了不必要的错误枚举

**修复**

- 部分文本描述
- 充电未换算问题

### 2023.10.10

> v1.1.2

**新增**

- 热重载配置
- 可设置间隔时间与提醒时间

**修复**

- 修复了记录当日电量事件挂载事件错误的 bug

### 2023.10.9

> v1.1.1

**新增**

- 是否开启空调查询选项
- 添加充电记录功能
- 添加日汇报耗电量功能
- 添加预警值配置项

**删除**

- 删除了单独的照明与空调查询事件响应

**修复**

- 修复了昨日电量无法正常计算的 bug
- 修复了记录类事件.finish()事件指向错误的问题

### 2023.10.8

> v1.1.0

**新增**

- 记录系统
- 查询耗电量
- 配置功能

**优化**

- 将配置单独列出文件夹，使用时直接读取

### 2023.10.6

> v1.0.1

**优化**

- 重构 nb 插件结构
- 重构请求对象格式
- 重构解析方式
- 使用枚举类型作为参数
- 使请求函数直接返回浮点值
- 更快的请求方式
- 更人性化的提醒文本
- 更安全的保密查询

### 2023.10.4

> v1.0.0

程序基础
